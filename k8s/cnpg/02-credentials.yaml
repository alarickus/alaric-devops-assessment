# Database Credentials for CloudNativePG
# These secrets are used by the PostgreSQL cluster

---
# Application user credentials
apiVersion: v1
kind: Secret
metadata:
  name: db-credentials
  namespace: mirror-app
  labels:
    app: mirror-db
type: kubernetes.io/basic-auth
stringData:
  username: app
  password: AppUser_SecurePassword123!
  # This creates the application user with password

---
# Superuser credentials (for admin access)
apiVersion: v1
kind: Secret
metadata:
  name: db-superuser
  namespace: mirror-app
  labels:
    app: mirror-db
type: kubernetes.io/basic-auth
stringData:
  username: postgres
  password: SuperUser_SecurePassword123!
  # This is the PostgreSQL superuser

---
# Connection string secret for application
apiVersion: v1
kind: Secret
metadata:
  name: db-secret
  namespace: mirror-app
  labels:
    app: mirror-db
type: Opaque
stringData:
  # Read-write connection (primary)
  database-url: "postgresql://app:AppUser_SecurePassword123!@mirror-db-rw.mirror-app.svc.cluster.local:5432/mirrordb"
  password: "AppUser_SecurePassword123!"
  
  # Read-only connection (replicas) - for future scaling
  database-url-ro: "postgresql://app:AppUser_SecurePassword123!@mirror-db-ro.mirror-app.svc.cluster.local:5432/mirrordb"
  
  # Host and port separately (if needed)
  host: "mirror-db-rw.mirror-app.svc.cluster.local"
  port: "5432"
  database: "mirrordb"
  username: "app"

---
# Azure Backup credentials (optional - configure if using Azure Blob backup)
# Uncomment and configure if you want automated backups to Azure Blob Storage
# apiVersion: v1
# kind: Secret
# metadata:
#   name: azure-backup-creds
#   namespace: mirror-app
# type: Opaque
# stringData:
#   storage-account: "your-storage-account-name"
#   storage-key: "your-storage-account-key"
